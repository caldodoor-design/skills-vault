---
name: generating-alternatives
description: 緑ハット（代替案生成）の発散思考Skill。二択に陥った時に第3の選択肢を生み出す。前提を疑い、制約を外してから戻す構造的なアプローチ。
trigger: 「AかBかで迷っている」「議論が平行線」「行き詰まった」「要件が矛盾している」時。設計が膠着した時や、どの選択肢もしっくりこない時に使う。
---

# Generating Alternatives

## Purpose

二択に陥った時に第3の選択肢を生み出す。

人間もAIも、選択肢が2つ見えると「どちらが良いか」の評価モードに入る。しかし、最良の選択肢はまだ見えていないところにあることが多い。このSkillは、前提を疑い、制約を外し、組み合わせることで、検討すべき選択肢の幅を広げる。

発散（案を出す）と収束（案を絞る）は別フェーズ。このSkillは発散に特化する。収束は `evaluating-risk-and-opportunity.md` に任せる。


## Context

- 設計が行き詰まった時: 「どのパターンもフィットしない」
- 要件が矛盾する時: 「速くて安くて高品質」のような無理ゲー
- 議論が平行線の時: チーム内で「AかBか」で割れている
- 既存の選択肢に不満がある時: 「どれもイマイチだが消去法で選ぶしかない」
- 新しい視点が欲しい時: 「何か見落としている気がする」


## Pattern

### Step 1: 現在の選択肢を書き出す

まず、今見えている選択肢を全て書き出す。この時点では2つでも構わない。

```
現在の選択肢:
- A: [具体的な案]
- B: [具体的な案]
```

**コツ:** 各選択肢を「動詞 + 目的語」で書く。「Reactを使う」「Vueを使う」のように。曖昧な表現（「良い感じにする」）は禁止。


### Step 2: 暗黙の前提を洗い出す

各選択肢の裏にある「当然の前提」を言語化する。前提は見えないからこそ強力な制約になっている。

**前提を見つける質問:**
- 「なぜこの2つだけが選択肢なのか？」
- 「この選択肢は何を前提にしているか？」
- 「誰がこの制約を決めたか？本当に動かせないか？」
- 「この問題を初めて見た人なら、どう考えるか？」

```
選択肢Aの暗黙の前提:
- フロントエンドは単一のフレームワークで統一すべき
- 現在のチーム構成は変わらない
- 期限は動かせない

選択肢Bの暗黙の前提:
- 既存のコードベースは捨てられない
- ユーザーは現在のUIに慣れている
- パフォーマンスが最優先
```


### Step 3: 前提を1つずつ外す

洗い出した前提を1つずつ外してみる。「もし○○が不要だったら？」「もし○○が逆だったら？」と問う。

```
前提を外す実験:
- 「フレームワーク統一が不要だったら？」
  → ページごとに最適な技術を使う「マイクロフロントエンド」案が出る

- 「期限が倍あったら？」
  → 段階的移行案が現実的になる

- 「既存コードを捨てていいなら？」
  → ゼロベースで最適解を設計し、必要な部分だけ移植する案

- 「パフォーマンスが最優先でなかったら？」
  → DXを最優先にした技術選定が可能に
```

**重要:** この段階では「現実的かどうか」を判断しない。外した前提が本当に外せるかは後で検討する。


### Step 4: 制約を変形する

前提を外すのとは別に、制約の形を変えてみる。

| 変形の型 | 問い | 例 |
|----------|------|-----|
| **スケール変更** | 規模が10倍/10分の1だったら？ | 「ユーザーが100人だったら何を選ぶか？」 |
| **時間軸変更** | 期限が倍/半分だったら？ | 「1週間で作るなら何を選ぶか？」 |
| **リソース変更** | 人が倍/半分だったら？ | 「1人で作るなら何が最も現実的か？」 |
| **優先度逆転** | 最優先と最低優先を入れ替えたら？ | 「保守性を最優先にしたら何を選ぶか？」 |
| **ユーザー変更** | 別のユーザーが使うとしたら？ | 「エンジニアではなくデザイナーが使うなら？」 |
| **時代変更** | 3年後に判断するなら？ | 「3年後の技術トレンドを考慮したら？」 |

```
制約変形の結果:
- 「1人で作るなら」→ 最もシンプルな技術を選ぶ。学習コストゼロの案が出る
- 「3年後に判断するなら」→ 今のトレンドではなく、標準化が進んでいる技術を選ぶ
- 「保守性最優先なら」→ 枯れた技術 + 徹底したドキュメンテーション案
```


### Step 5: 組み合わせる

ここまでに出た案を組み合わせて、新しい選択肢を作る。

| 組み合わせの型 | 方法 | 例 |
|---------------|------|-----|
| **良いとこ取り** | AとBの長所を合わせる | 「Aの柔軟性 + Bの安定性」 |
| **時間分割** | Aを先にやってBに移行 | 「まずAで素早くリリースし、安定したらBに移行」 |
| **空間分割** | 領域によってA/Bを使い分け | 「管理画面はA、ユーザー画面はB」 |
| **段階的移行** | 徐々にAからBへ | 「新規コードはBで、既存はAのまま。接触面だけ整理」 |
| **プロトタイプ検証** | AとB両方を小さく試す | 「2日でAのPoC、2日でBのPoC。比較して決める」 |


### Step 6: 軽く評価して有望な案を残す

発散フェーズで出た案を、黒ハット（リスク1つ）と黄ハット（機会1つ）で軽く評価する。詳細な評価は `evaluating-risk-and-opportunity.md` に任せる。

```
候補案の軽量評価:
- 案C: マイクロフロントエンド
  - 黒: 運用の複雑さが増す
  - 黄: チームごとに最適な技術選択が可能
  → 有望。詳細評価へ

- 案D: ゼロベース再設計
  - 黒: コストが現実的でない
  - 黄: 技術的負債を完全に解消できる
  → 現時点では非現実的。パーツだけ採用の余地あり

- 案E: 段階的移行（A先行→B移行）
  - 黒: 移行期間中に2つのシステムが共存
  - 黄: リスクを分散しつつ、最終的にBの利点を得る
  → 有望。詳細評価へ
```


## Rules

1. **発散フェーズでは「現実的かどうか」を判断しない。** Step 3-5では案を出すことだけに集中する。「それは無理」は禁止ワード
2. **最低3つの代替案を出してから評価に入る。** 2つでは足りない。3つ目を出す努力が、本当に良い案を生む
3. **「極端な案」を1つは必ず含める。** 「全部捨ててゼロから作る」「何もしない」「外注する」など。極端な案は実行しなくても、思考の幅を広げるアンカーになる
4. **前提を言語化してから外す。** 暗黙のままでは外せない。まず「何を当然と思っているか」を書き出す
5. **発散と収束を混ぜない。** 案を出すStep 3-5と、評価するStep 6は明確に分ける


## Anti-Patterns

### 発散不足（最初の案を磨き続ける）
- **症状:** 最初に思いついた案をブラッシュアップし続ける。他の案を考えない
- **原因:** アンカリング効果。最初の案が基準点になり、そこからの差分でしか考えられなくなる
- **対策:** Step 2で前提を洗い出し、Step 3で意図的に外す。最初の案を一旦忘れる時間を作る

### 黒ハットの越権（出す前に否定する）
- **症状:** 「マイクロフロントエンド？うちの規模では大げさだよ」と、出した瞬間に却下する
- **原因:** 発散と収束の混線。評価モードのまま発散しようとしている
- **対策:** ルール1を厳守。「現実的かどうかは後で考える。今は出すだけ」と唱える

### 全切り捨て（「現実的じゃない」の連発）
- **症状:** Step 6で全ての案に「現実的じゃない」と言って却下。結局元の2択に戻る
- **原因:** 評価の粒度が粗すぎる。「この案のこの部分だけ使えないか」という視点がない
- **対策:** 案を丸ごと採用/却下するのではなく、「この案のどの要素が使えるか」を問う。案Dが非現実的でも、案Dの「ゼロベースで設計する」という要素を案Eに取り入れることはできる


## Examples

### 例1: 状態管理の選定で迷っている

**現在の選択肢:**
- A: Redux（実績があり堅牢だが、ボイラープレートが多い）
- B: React Context + useReducer（シンプルだが、大規模化した時にパフォーマンス懸念）

**暗黙の前提:**
- 状態管理は1つのライブラリに統一すべき
- グローバル状態は必要
- クライアントサイドで全ての状態を管理する

**前提を外す:**
- 「統一しなくていいなら？」→ サーバー状態とUI状態で別の仕組みを使う案
- 「グローバル状態が不要だったら？」→ コンポーネントローカル + props drillingの徹底案
- 「クライアントで管理しなくていいなら？」→ サーバーサイド状態管理（React Server Components、TanStack Query）案

**制約変形:**
- 「1人で作るなら？」→ 最もシンプルなContext + useReducerを選ぶ
- 「3年後の技術トレンドなら？」→ サーバーファースト（RSC + TanStack Query）が主流の可能性

**組み合わせ:**
- 案C: TanStack Query（サーバー状態） + Zustand（UI状態）。役割で分離する
- 案D: React Server Components + 最小限のクライアント状態（useState/useReducer）
- 案E: Reduxを新規コードのみに導入し、既存はContextのまま（段階的導入）

**軽量評価:**
- 案C: 黒=2つのライブラリの学習コスト / 黄=各領域に最適化された状態管理 → 有望
- 案D: 黒=RSCの成熟度がまだ低い / 黄=将来の主流に先行投資 → 時期尚早だが注視
- 案E: 黒=2つの状態管理の共存は混乱を招く / 黄=リスクを抑えた段階的移行 → 有望

**結論:** 案Cを詳細評価へ。サーバー状態とUI状態の分離は「前提を外す」ことで見えた第3案。


### 例2: フルリプレイス vs パッチ修正

**現在の選択肢:**
- A: レガシーシステムを新技術でフルリプレイス（6ヶ月見込み）
- B: 既存システムにパッチを当て続ける（場当たり対応）

**暗黙の前提:**
- システムは一枚岩（全体を一度に置き換える or 全体をパッチする）
- 新旧システムの共存は不可能
- 6ヶ月のプロジェクトは計画通り進む
- 現在の機能は全て新システムに必要

**前提を外す:**
- 「一枚岩でなくていいなら？」→ モジュールごとに段階的にリプレイスする案
- 「共存できるなら？」→ Strangler Fig Pattern（旧システムの前に新システムを立て、徐々に移行）
- 「全機能が必要でないなら？」→ 使われていない機能を捨てて、コア機能だけリプレイスする案

**制約変形:**
- 「期限が3ヶ月なら？」→ 最も問題のあるモジュールだけリプレイス。残りはパッチ
- 「チームが倍なら？」→ 新旧システムを別チームで並行開発
- 「ユーザーが10分の1なら？」→ 新システムを一部ユーザーだけに公開してテスト

**組み合わせ:**
- 案C: Strangler Fig Pattern。新しいルーティング層を挟み、リクエストを新旧システムに振り分ける。モジュール単位で段階的に新システムへ移行
- 案D: コア機能特定 → 使われていない機能を廃止 → 残ったコア機能だけ新技術で再構築（スコープ縮小リプレイス）
- 案E: 「パッチ + 境界整理」。パッチを当てつつ、モジュール境界を整理する。将来のリプレイスが容易になる基盤だけ今作る

**軽量評価:**
- 案C: 黒=ルーティング層の複雑さ / 黄=リスク分散しつつ確実に移行 → 有望
- 案D: 黒=「使われていない機能」の判断が難しい / 黄=スコープが大幅に縮小 → 有望（データ分析が前提）
- 案E: 黒=パッチの効果が薄い場合、時間の無駄 / 黄=最もリスクが低い出発点 → 堅実

**結論:** 案Eから始めて案Cへ移行する二段階戦略。まず境界を整理し、Strangler Fig Patternで段階的にリプレイスする。案Dのスコープ縮小（使われていない機能の特定）も並行して進める。


## AI Prompt Template

```
以下の判断について、代替案を生成してください。

## 現在の選択肢
- A: [選択肢A]
- B: [選択肢B]

## 背景・制約
[関連する制約、チーム構成、期限など]

## 実行手順
1. 各選択肢の「暗黙の前提」を3つ以上洗い出す
2. その前提を1つずつ外して「もし○○が不要だったら？」を問う
3. 制約を変形する（期限が倍、チームが半分、優先度逆転など）
4. 出てきた案を組み合わせて、新しい選択肢を最低3つ作る
5. 各案を黒ハット1つ・黄ハット1つで軽く評価する
6. 有望な案を提示し、元の選択肢と合わせて比較する

発散フェーズ（1-4）では「現実的かどうか」を判断せず、案を出すことに集中してください。
極端な案を1つは必ず含めてください。
```


## Notes

- このSkillは `thinking-with-six-hats.md` の緑ハットを深掘りしたもの。6色ハットの一環として使う場合は、緑ハットのフェーズでこのSkillの手順を実行する
- 「極端な案」は実行するためではなく、思考の幅を広げるために出す。「全部外注する」という案自体は非現実的でも、「一部を外注する」という現実的な派生案が生まれることがある
- 前提を外す作業は、1人よりもAIエージェントとの対話で効果的。人間は自分の前提に気づきにくいが、AIに「この選択肢の暗黙の前提は何か？」と問えば、見落としていた前提が出てくる
- 出てきた代替案を評価する際は `evaluating-risk-and-opportunity.md` を使う。このSkillは発散、あちらは収束。セットで使うことで判断の質が上がる
